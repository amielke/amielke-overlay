67,125d66
< case $DVDAUTHORMODE in
< 	1min)
< 		DVDAUTHORCHAPTERS=\
< "00:00:00,00:01:00,00:02:00,00:03:00,00:04:00,00:05:00,00:06:00,00:07:00,\
< 00:08:00,00:09:00,00:10:00,00:11:00,00:12:00,00:13:00,00:14:00,00:15:00,\
< 00:16:00,00:17:00,00:18:00,00:19:00,00:20:00,00:21:00,00:22:00,00:23:00,\
< 00:24:00,00:25:00,00:26:00,00:27:00,00:28:00,00:29:00,00:30:00,00:31:00,\
< 00:32:00,00:33:00,00:34:00,00:35:00,00:36:00,00:37:00,00:38:00,00:39:00,\
< 00:40:00,00:41:00,00:42:00,00:43:00,00:44:00,00:45:00,00:46:00,00:47:00,\
< 00:48:00,00:49:00,00:50:00,00:51:00,00:52:00,00:53:00,00:54:00,00:55:00,\
< 00:56:00,00:57:00,00:58:00,00:59:00,01:00:00,01:01:00,01:02:00,01:03:00,\
< 01:04:00,01:05:00,01:06:00,01:07:00,01:08:00,01:09:00,01:10:00,01:11:00,\
< 01:12:00,01:13:00,01:14:00,01:15:00,01:16:00,01:17:00,01:18:00,01:19:00,\
< 01:20:00,01:21:00,01:22:00,01:23:00,01:24:00,01:25:00,01:26:00,01:27:00,\
< 01:28:00,01:29:00,01:30:00,01:31:00,01:32:00,01:33:00,01:34:00,01:35:00,\
< 01:36:00,01:37:00,01:38:00"
< 		;;
< 	2min)
< 		DVDAUTHORCHAPTERS=\
< "00:00:00,00:02:00,00:04:00,00:06:00,00:08:00,00:10:00,00:12:00,00:14:00,\
< 00:16:00,00:18:00,00:20:00,00:22:00,00:24:00,00:26:00,00:28:00,00:30:00,\
< 00:32:00,00:34:00,00:36:00,00:38:00,00:40:00,00:42:00,00:44:00,00:46:00,\
< 00:48:00,00:50:00,00:52:00,00:54:00,00:56:00,00:58:00,01:00:00,01:02:00,\
< 01:04:00,01:06:00,01:08:00,01:10:00,01:12:00,01:14:00,01:16:00,01:18:00,\
< 01:20:00,01:22:00,01:24:00,01:26:00,01:28:00,01:30:00,01:32:00,01:34:00,\
< 01:36:00,01:38:00,01:40:00,01:42:00,01:44:00,01:46:00,01:48:00,01:50:00,\
< 01:52:00,01:54:00,01:56:00,01:58:00,02:00:00,02:02:00,02:04:00,02:06:00,\
< 02:08:00,02:10:00,02:12:00,02:14:00,02:16:00,02:18:00,02:20:00,02:22:00,\
< 02:24:00,02:26:00,02:28:00,02:30:00,02:32:00,02:34:00,02:36:00,02:38:00,\
< 02:40:00,02:42:00,02:44:00,02:46:00,02:48:00,02:50:00,02:52:00,02:54:00,\
< 02:56:00,02:58:00,03:00:00,03:02:00,03:04:00,03:06:00,03:08:00,03:10:00,\
< 03:12:00,03:14:00,03:16:00"
< 		;;
< 	5min)
< 		DVDAUTHORCHAPTERS=\
< "00:00:00,00:05:00,00:10:00,00:15:00,00:20:00,00:25:00,00:30:00,00:35:00,\
< 00:40:00,00:45:00,00:50:00,00:55:00,01:00:00,01:05:00,01:10:00,01:15:00,\
< 01:20:00,01:25:00,01:30:00,01:35:00,01:40:00,01:45:00,01:50:00,01:55:00,\
< 02:00:00,02:05:00,02:10:00,02:15:00,02:20:00,02:25:00,02:30:00,02:35:00,\
< 02:40:00,02:45:00,02:50:00,02:55:00,03:00:00,03:05:00,03:10:00,03:15:00,\
< 03:20:00,03:25:00,03:30:00,03:35:00,03:40:00,03:45:00,03:50:00,03:55:00,\
< 04:00:00,04:05:00,04:10:00,04:15:00,04:20:00,04:25:00,04:30:00,04:35:00,\
< 04:40:00,04:45:00,04:50:00"
< 		;;
< 	10min)
< 		DVDAUTHORCHAPTERS=\
< "00:00:00,00:10:00,00:20:00,00:30:00,00:40:00,00:50:00,01:00:00,01:10:00,\
< 01:20:00,01:30:00,01:40:00,01:50:00,02:00:00,02:10:00,02:20:00,02:30:00,\
< 02:40:00,02:50:00,03:00:00,03:10:00,03:20:00,03:30:00,03:40:00,03:50:00,\
< 04:00:00,04:10:00,04:20:00,04:30:00,04:40:00,04:50:00"
< 		;;
< 	*)
< 		DVDAUTHORCHAPTERS=\
< "00:00:00,00:15:00,00:30:00,00:45:00,01:00:00,01:15:00,01:30:00,01:45:00,\
< 02:00:00,02:15:00,02:30:00,02:45:00,03:00:00,03:15:00,03:30:00,03:45:00,\
< 04:00:00,04:15:00,04:30:00,04:45:00"
< 		;;	
< esac
< 
248,249c189,190
< [ -z "$DVDLABELTEMPLATE" ]         && DVDLABELTEMPLATE="-e $VDRCONVERTDIR/share/vdrconvert/postscript/penguin.eps"
< [ -z "$DVDSUBCATECORY" ]           && DVDSUBCATECORY="-s $generatedvd_version"
---
> [ -z "$DVDLABELTEMPLATE" ]         && DVDLABELTEMPLATE="$VDRCONVERTDIR/share/vdrconvert/postscript/penguin.eps"
> [ -z "$DVDSUBCATECORY" ]           && DVDSUBCATECORY="$generatedvd_version"
869c810,815
< 	  DVDCATECORY="-c $DVDNAME"
---
> 	  DVDCATECORY=`echo ${DVDMENU_LABEL_MENU[1]}|fold -w 60 -s`
> 	  if [ $DVDMENU_ENTRY_MAX -gt $DVDMENU_ENTRY_MIN ]
> 	  then
> 		DVDSUBCATECORY=`echo ${DVDMENU_LABEL_MENU[2]}|fold -w 60 -s`
> 	  fi
> 	  
873c819
<       	  do
---
> 	  do      	
876d821
< 	      #echo "" >> $LTEMPDIR/items.$$
889c834
<               DVDLABELTEMPLATE="-e $first/background.eps"
---
>               DVDLABELTEMPLATE="$first/background.eps"
891,893c836,849
< 
< 	  $DVDCDLABELGEN $DVDLABELOPTIONS $DVDCATECORY $DVDSUBCATECORY \
< 		-f $LTEMPDIR/items.$$ $DVDLABELDATEFORMAT $DVDLABELTEMPLATE > ${Image}.ps
---
> 	  $DVDCDLABELGEN $DVDLABELOPTIONS -c \"$DVDCATECORY\" -s \"$DVDSUBCATECORY\" -f $LTEMPDIR/items.$$ $DVDLABELDATEFORMAT -e $DVDLABELTEMPLATE -o $Image.ps #&> ${Image}.log
> 	  [ -x "$DVDPDF" ] && $DVDPDF ${Image}.ps ${Image}.pdf
> 	  if [ "$CREATELABELSCRIPT" = "yes" ]
> 	  then
> 	      cp $LTEMPDIR/items.$$ ${Image}.items
> 	      if [ -x $first/background.eps ] 
> 	      then
> 	          mv $first/background.eps $Image.eps
> 		  $DVDLABELTEMPLATE = $Image.eps
> 	      fi
> 	      echo "$DVDCDLABELGEN $DVDLABELOPTIONS -c \"$DVDCATECORY\" -s \"$DVDSUBCATECORY\" -f $Image.items $DVDLABELDATEFORMAT -e $DVDLABELTEMPLATE -o $Image.ps" > ${Image}.label
> 	      [ -x "$DVDPDF" ] && echo "$DVDPDF $Image.ps $Image.pdf" >> ${Image}.label
> 	      chmod +x ${Image}.label
> 	  fi
941c897
< 	  DVDMENU_LABEL_MENU[Number]=`echo $Record|sed 's/_/ /g'`
---
> 	  DVDMENU_LABEL_MENU[Number]=`echo $Record|sed 's/_/ /g'|sed 's/@//g'`
967a924
> 
970a928
> 	      [ -f $i/marks.vdr ] && cp $i/marks.vdr ${UniqueDir[Number]}
985a944
> 	      [ -f $i/marks.vdr ] && cp $i/marks.vdr ${UniqueDir[Number]}
1004a964
> 	      [ -f $i/marks.vdr ] && cp $i/marks.vdr ${UniqueDir[Number]}
1025c985,990
<               nice -n $PRIO $JAVA -jar $PX -c $PXINI -o ${UniqueDir[Number]} $pxfiles > ${LOG[Number]} 2>&1
---
> 	      if [-f $i/marks.vdr]
> 	      then
>             	nice -n $PRIO $JAVA -jar $PX -c $PXINI -p $i/marks.vdr -o ${UniqueDir[Number]} $pxfiles > ${LOG[Number]} 2>&1
> 	      else
>             	nice -n $PRIO $JAVA -jar $PX -c $PXINI -o ${UniqueDir[Number]} $pxfiles > ${LOG[Number]} 2>&1
> 	      fi	
1110a1076,1157
> case $DVDAUTHORMODE in
> 	1min)
> 		DVDAUTHORCHAPTERS=\
> "00:00:00,00:01:00,00:02:00,00:03:00,00:04:00,00:05:00,00:06:00,00:07:00,\
> 00:08:00,00:09:00,00:10:00,00:11:00,00:12:00,00:13:00,00:14:00,00:15:00,\
> 00:16:00,00:17:00,00:18:00,00:19:00,00:20:00,00:21:00,00:22:00,00:23:00,\
> 00:24:00,00:25:00,00:26:00,00:27:00,00:28:00,00:29:00,00:30:00,00:31:00,\
> 00:32:00,00:33:00,00:34:00,00:35:00,00:36:00,00:37:00,00:38:00,00:39:00,\
> 00:40:00,00:41:00,00:42:00,00:43:00,00:44:00,00:45:00,00:46:00,00:47:00,\
> 00:48:00,00:49:00,00:50:00,00:51:00,00:52:00,00:53:00,00:54:00,00:55:00,\
> 00:56:00,00:57:00,00:58:00,00:59:00,01:00:00,01:01:00,01:02:00,01:03:00,\
> 01:04:00,01:05:00,01:06:00,01:07:00,01:08:00,01:09:00,01:10:00,01:11:00,\
> 01:12:00,01:13:00,01:14:00,01:15:00,01:16:00,01:17:00,01:18:00,01:19:00,\
> 01:20:00,01:21:00,01:22:00,01:23:00,01:24:00,01:25:00,01:26:00,01:27:00,\
> 01:28:00,01:29:00,01:30:00,01:31:00,01:32:00,01:33:00,01:34:00,01:35:00,\
> 01:36:00,01:37:00,01:38:00"
> 		;;
> 	2min)
> 		DVDAUTHORCHAPTERS=\
> "00:00:00,00:02:00,00:04:00,00:06:00,00:08:00,00:10:00,00:12:00,00:14:00,\
> 00:16:00,00:18:00,00:20:00,00:22:00,00:24:00,00:26:00,00:28:00,00:30:00,\
> 00:32:00,00:34:00,00:36:00,00:38:00,00:40:00,00:42:00,00:44:00,00:46:00,\
> 00:48:00,00:50:00,00:52:00,00:54:00,00:56:00,00:58:00,01:00:00,01:02:00,\
> 01:04:00,01:06:00,01:08:00,01:10:00,01:12:00,01:14:00,01:16:00,01:18:00,\
> 01:20:00,01:22:00,01:24:00,01:26:00,01:28:00,01:30:00,01:32:00,01:34:00,\
> 01:36:00,01:38:00,01:40:00,01:42:00,01:44:00,01:46:00,01:48:00,01:50:00,\
> 01:52:00,01:54:00,01:56:00,01:58:00,02:00:00,02:02:00,02:04:00,02:06:00,\
> 02:08:00,02:10:00,02:12:00,02:14:00,02:16:00,02:18:00,02:20:00,02:22:00,\
> 02:24:00,02:26:00,02:28:00,02:30:00,02:32:00,02:34:00,02:36:00,02:38:00,\
> 02:40:00,02:42:00,02:44:00,02:46:00,02:48:00,02:50:00,02:52:00,02:54:00,\
> 02:56:00,02:58:00,03:00:00,03:02:00,03:04:00,03:06:00,03:08:00,03:10:00,\
> 03:12:00,03:14:00,03:16:00"
> 		;;
> 	5min)
> 		DVDAUTHORCHAPTERS=\
> "00:00:00,00:05:00,00:10:00,00:15:00,00:20:00,00:25:00,00:30:00,00:35:00,\
> 00:40:00,00:45:00,00:50:00,00:55:00,01:00:00,01:05:00,01:10:00,01:15:00,\
> 01:20:00,01:25:00,01:30:00,01:35:00,01:40:00,01:45:00,01:50:00,01:55:00,\
> 02:00:00,02:05:00,02:10:00,02:15:00,02:20:00,02:25:00,02:30:00,02:35:00,\
> 02:40:00,02:45:00,02:50:00,02:55:00,03:00:00,03:05:00,03:10:00,03:15:00,\
> 03:20:00,03:25:00,03:30:00,03:35:00,03:40:00,03:45:00,03:50:00,03:55:00,\
> 04:00:00,04:05:00,04:10:00,04:15:00,04:20:00,04:25:00,04:30:00,04:35:00,\
> 04:40:00,04:45:00,04:50:00"
> 		;;
> 	10min)
> 		DVDAUTHORCHAPTERS=\
> "00:00:00,00:10:00,00:20:00,00:30:00,00:40:00,00:50:00,01:00:00,01:10:00,\
> 01:20:00,01:30:00,01:40:00,01:50:00,02:00:00,02:10:00,02:20:00,02:30:00,\
> 02:40:00,02:50:00,03:00:00,03:10:00,03:20:00,03:30:00,03:40:00,03:50:00,\
> 04:00:00,04:10:00,04:20:00,04:30:00,04:40:00,04:50:00"
> 		;;
> 	marks)
> 		if [ -r marks.vdr ]
> 		then
> 	    	      printf "%s," 0 > chapters.vdr
> 	    	      marklines=`cat marks.vdr|wc -l`
> 	    	      let marklines=marklines-1
> 	    
> 	    	      for t in `cat marks.vdr|head -$marklines|cut -f1 -d'.'`
> 	    	      do
> 	        	  printf "%s," $t >> chapters.vdr
> 	    	      done
> 	    	      for t in `cat marks.vdr|tail -1|cut -f1 -d'.'`
> 	    	      do
> 	        	  printf "%s\n" $t >> chapters.vdr
> 	    	      done
> 		      DVDAUTHORCHAPTERS=`cat chapters.vdr`
> 		else
>                       DVDAUTHORCHAPTERS=\
> "00:00:00,00:15:00,00:30:00,00:45:00,01:00:00,01:15:00,01:30:00,01:45:00,\
> 02:00:00,02:15:00,02:30:00,02:45:00,03:00:00,03:15:00,03:30:00,03:45:00,\
> 04:00:00,04:15:00,04:30:00,04:45:00"
> 		fi
> 		;;
> 	*)
> 		DVDAUTHORCHAPTERS=\
> "00:00:00,00:15:00,00:30:00,00:45:00,01:00:00,01:15:00,01:30:00,01:45:00,\
> 02:00:00,02:15:00,02:30:00,02:45:00,03:00:00,03:15:00,03:30:00,03:45:00,\
> 04:00:00,04:15:00,04:30:00,04:45:00"
> 		;;	
> esac
> 
